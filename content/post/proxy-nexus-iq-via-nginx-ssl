+++
title = "Proxy Nexus-IQ via NGINX with SSL"
Description = "An SSL enabled NGINX config to proxy Nexus-IQ"
date = "2018-01-19T14:45:15-06:00"
Topics = ["geek"]
Tags = ["nginx", "nexus-iq"]
#menu = "main"

+++

While Sonatype's directions for proxying their Nexus server through NGINX is complete, the docs for their Nexus-IQ server were not. So, after some discovery and testing, here is an SSL enabled NGINX config to proxy Nexus-IQ

```
# An SSL enabled NGINX config to proxy Nexus-IQ
# https://gist.github.com/philcryer/19bc9879a626983eb42159be2f238445

server {
        listen                          *:80;
        server_name                     nexus-iq-server;
        return                          301 https://$server_name$request_uri;
}

server {
        listen                          *:443;
        server_name                     nexus-iq-server;
        client_max_body_size            1G;
        ssl                             on;
        ssl_certificate                 /etc/ssl/certs/nexus-iq-server.crt;
        ssl_certificate_key             /etc/ssl/certs/nexus-iq-server.key;
        location / {
                proxy_read_timeout      60;
                proxy_redirect          off;

                proxy_pass_header       Server;
                proxy_cookie_path       ~*^/.* /;
                proxy_pass              http://localhost:8070/;

                proxy_set_header        Host $host;
                proxy_set_header        X-Real-IP $remote_addr;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_set_header        X-Forwarded-Host $server_name;
                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        }
}
```
